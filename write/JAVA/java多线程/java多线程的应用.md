通俗的解释一下多线程先：



多线程用于堆积处理，就像一个大土堆，一个推土机很慢，那么10个推土机一起来处理，当然速度就快了，不过由于位置的限制，如果20个推土机，那么推土机之间会产生相互的避让，相互摩擦，相互拥挤，反而不如10个处理的好，所以，多线程处理，线程数要开的恰当，就可以提高效率。



最典型的如：
1、用户注册完成送大礼包/积分之类，且积分等也是另一个系统并比较耗时；且这类任务即使失败也不是特别重要的。
2、后台线程：比如定期执行一些特殊任务，如定期更新配置文件，任务调度（如quartz），一些监控用于定期信息采集等。


最典型的应用比如tomcat，tomcat内部采用的就是多线程，上百个客户端访问同一个web应用，tomcat接入后都是把后续的处理扔给一个新的线程来处理，这个新的线程最后调用到我们的servlet程序，比如doGet或者doPost方法。

如果不采用多线程机制，上百个人同时访问一个web应用的时候，tomcat就得排队串行处理了，那样客户端根本是无法忍受那种访问速度的。

还有就是需要异步处理的时候，需要使用多线程。比如task a和task b要并行处理，单个线程只能串行处理，先做完task a然后再做task b。如果想要多个task同时执行的话，就必须为每个task分配一个线程，然后通过java虚拟机的线程调度，来同时执行多个任务。比如你的CPU是多核心的话，就可以让一个CPU执行一个线程。如果只有一个CPU的话，底层是按照分时复用的原则，各个线程按照时间片来获得CPU资源。

特别耗时的操作，如备份数据库，可以开个线程执行备份，然后执行返回，前台不断向后台询问线程执行状态
问：JAVA项目中哪些场景需要用到多线程，深感迷茫，请使用过的高手指点。

答：

场景一:一个业务逻辑有很多次的循环，每次循环之间没有影响，比如验证1万条url路径是否存在，正常情况要循环1万次，逐个去验证每一条URL，这样效率会很低，假设验证一条需要1分钟，总共就需要1万分钟，有点恐怖。这时可以用多线程，将1万条URL分成50等份，开50个线程，没个线程只需验证200条，这样所有的线程执行完是远小于1万分钟的。

首先，我们知道计算机，是多进程的，也就是有很多进程，各自做不同的事情。。计算机在进程之间切换来切换去。。。

如果一个进程里面只有一个线程，就相当于只有一个干活的，，那么cpu切换到他上面的时间就会有限。。

但是如果我看到这个进程非常耗时，一个线程干不动了，给他来个影分身之术，，多加几个线程。。。那么cpu就必须要切换到这些线程上面去执行。

占用cpu资源就多了，所以增加线程就相当于增加占用cpu的时间，可以增加执行速度，对于耗时长的任务，可以考虑用多线程。。



还是拿上面那个验证url的例子举例，验证一万条url是否存在，如果只有一个线程，一分钟只能验证一条，因为你只有一个线程，假设机器上总线程是100，

占用cpu资源有限。只有百分之一。。。

但是如果我有50个线程，我就占用了百分之五十的cpu资源。。那么我一分钟就可以验证100条，，因为cpu切换到这50个线程的几率是很大的。。





场景二:需要知道一个任务的执行进度，比如我们常看到的进度条，实现方式可以是在任务中加入一个整型属性变量(这样不同方法可以共享)，任务执行一定程度就给变量值加1，另外开一个线程按时间间隔不断去访问这个变量，并反馈给用户。



总之使用多线程就是为了充分利用cpu的资源，提高程序执行效率，当你发现一个业务逻辑执行效率特别低，耗时特别长，就可以考虑使用多线程。不过CPU执行哪个线程的时间和顺序是不确定的，即使设置了线程的优先级，因此使用多线程的风险也是比较大的，会出现很多预料不到的问题，一定要多熟悉概念，多构造不同的场景去测试才能够掌握!