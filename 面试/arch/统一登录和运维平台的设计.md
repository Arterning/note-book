

我觉得比较好的设计是这样的


统一登录平台：
- 用户通过前端系统发送登录请求，请求中携带账号、密码、验证码等信息。
- 请求到网关服务，网关服务将请求路由到登录微服务。
- 登录微服务进行认证操作，如果认证通过则生成jwt token返回给前端


网关：
- 负责API路由
- 验证是否登录，验证请求头里面是否有token，解析token，将解析出的用户相关数据(userId, userName)放在zuul的header中
- 验证是否有权限访问接口，需要访问运维平台的权限信息。


应用之间的互相访问可以使用
- api key 的方式访问
- grpc的方式调用，效率更高

个人认为应用之间的调用，完全不需要加什么签名的。。反正都是在内部



之前那样在拦截器中那样设计是因为：
需要在代码中支持注解，支持三种访问方式
- LOGIN 登录即可访问
- PUBLIC 开放访问
- AUTH 需要鉴权访问
使用拦截器才能够读取注解的信息，所以这样鉴权就放在了拦截器中操作了。

我觉得，其实只需要在运维平台上增加一个接口资源的配置功能也一样可以实现。

但是token的解析，无论哪种方案，还是统一在网关中处理比较合适。

```java

@Permission(level=LOGIN/AUTH/PUBLIC)
```





