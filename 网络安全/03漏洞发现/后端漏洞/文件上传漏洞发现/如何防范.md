防御
不要暴露上传文件的位置
禁用上传文件的执行权限
黑白名单
对上传的文件重命名，不易被猜测
对文件内容进行二次渲染
对上传的内容进行读取检查
不同系统有不同的需求，根据系统需求制定特定的防御手段。
（WAF加上复合型防火墙，一键安装解君愁~）


前端检测：
主要是通过javascript代码进行检测，非常容易进行绕过。

原理：
Web应用系统虽然对用户上传的文件进行了校验，但是校验是通过前端javascript代码完成的。由于恶意用户可以对前端javascript进行修改或者是通过抓包软件篡改上传的文件，就会导致基于js的校验很容易被绕过


后端检测_后缀名检测漏洞：
原理：通常是针对文件的扩展名后缀进行检测，主要是通过黑白名单进行过滤检测，如果不符全过滤规则则不允许上传。


绕过方法：

解析漏洞
.htaccess文件解析漏洞- apache解析漏洞
IIS7.0 | IIS7.5 | Nginx的解析漏洞
IIS6.0解析漏洞

截断上传
截断类型:PHP%00截断
截断原理:由于00代表结束符,所以会把00后面的所有字符都截断
截断条件:PHP版本小于5.3.4,PHP的magic_quotes_gpc为OFF状态

大小写绕过
 比如：aSp和pHp之类。
 
双写绕过
有时候在检测时，后台会把敏感字符替换成空格，这个时候，我们可以使用双写进行绕过。比如：pphphp